<!doctype html>
<html>
<head>
	<title>lycheeJS Ranger</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="stylesheet" href="../design/index.css">
	<script src="../design/index.js"></script>

	<!-- BOOTSTRAP -->
	<script src="/lychee/build/html/core.js"></script>

	<style>
	#status article.hidden {
		display: none;
	}
	#status table label.ico-online {
		color: #32afe5;
		text-shadow: #32afe5 0 0 10px, #32afe5 0 0 20px, #32afe5 0 0 40px;
	}
	#status div.wizard ul.select {
		width: auto;
		margin: 0px 16px;
	}
	#status div.wizard article label {
		color: #32afe5;
		text-shadow: #32afe5 0 0 10px, #32afe5 0 0 20px, #32afe5 0 0 40px;
		-webkit-animation: textpulse 2000ms infinite;
	}
	</style>
</head>
<body>
<menu>
	<b id="menu-toggle"></b>
	<li class="ico-status active" onclick="ui.changeState('status');">Status</li>
	<li class="ico-console" onclick="ui.changeState('console');">Console</li>
	<li class="ico-settings" onclick="ui.changeState('settings');">Settings</li>
	<li class="ico-help" onclick="ui.changeState('help');">Help</li>
</menu>
<aside>
	<button class="ico-refresh" onclick="window.location.href='./index.html'">Refresh</button>
</aside>

<section id="status" class="active">

	<div class="wizard">

		<article id="status-connect" class="hidden">
			<div>
				<label class="ico-refresh">Connecting ...</label>
			</div>
		</article>

		<article id="status-bootup" class="hidden">
			<h3>Boot lycheeJS</h3>
			<p>
				Select a Profile to boot lycheeJS sorbet.<br>
				<br>
				If you have no clue, select <q>development</q>.
			</p>
			<div>
				<ul class="select">
					<li><input tabindex="1" name="status-profile" type="radio" value="development" checked><span>development</span></li>
					<li><input tabindex="1" name="status-profile" type="radio" value="production"><span>production</span></li>
					<li><input tabindex="1" name="status-profile" type="radio" value="lycheejs.org"><span>lycheejs.org</span></li>
				</ul>
			</div>
			<p class="center">
				<button tabindex="1" class="ico-boot" href="boot()">Boot Sorbet</button>
			</p>
		</article>

	</div>

</section>

<section id="console">
	Console View
</section>

<section id="settings">
	Settings View
</section>

<section id="help">

	<div class="wizard">

		<article class="wide">
			<h3><b>1</b>Tool Usage</h3>
			<div>
				Install a Font on your System in order to use it with this Tool.
				Modify the settings to tweak the Font, the rest is done automatically.
			</div>
		</article>

		<article class="wide">
			<h3><b>2</b>Engine Usage</h3>
			<div>
				The exported files include the Font (.fnt).
				<br><br>
				If you want to use the Font inside your Project, you have to rename
				the files accordingly after copying them into the <q>source/entity</q> folder.
				<br><br>
				Example: If you have an Entity named <q>source/entity/Foo.js</q>,
				you have to rename the downloaded Font to <q>source/entity/Foo.fnt</q>.
			</div>
			<p>
				Then you can access the Font via the attachments parameter:
			</p>
			<pre class="javascript">
lychee.define('game.entity.Foo').exports(function(lychee, game, global, attachments) {

  var font = attachments['fnt'];
  if (font instanceof Font) {
    console.log('Yay, font available!', font);
  }

});
			</pre>
		</article>

	</div>

</section>

<footer>
	lycheeJS is (c) 2012-2015 by LazerUnicorns Ltd. and released under MIT license.
</footer>

<script>
(function(lychee, global) {

	var environment = new lychee.Environment({
		id:      'font',
		debug:   false,
		sandbox: false,
		build:   'tool.Main',
		packages: [
			new lychee.Package('tool', './lychee.pkg')
		],
		tags:     {
			platform: [ 'html' ]
		}
	});


	lychee.setEnvironment(environment);

	lychee.init(function(sandbox) {

		var lychee = sandbox.lychee;
		var tool   = sandbox.tool;


		var bootup  = document.querySelector('#status-bootup');
		var connect = document.querySelector('#status-connect');

		if (bootup !== null && connect !== null) {
			bootup.className  = 'hidden';
			connect.className = '';
		}


		var config = new Config('http://localhost:4848/api/Project');

		config.onload = function(result) {

			if (result === true) {

				bootup.className  = 'hidden';
				connect.className = 'hidden';

				sandbox.MAIN = new tool.Main();
				sandbox.MAIN.init();

			} else {

				connect.className = 'hidden';
				bootup.className    = '';

			}

		};


		config.load();


		global.boot = function() {

			var profile = ui.getValue('#status input');
			if (profile !== null) {
				window.open('lycheejs://boot=' + profile);
			}

		};

	});

})(lychee, typeof global !== 'undefined' ? global : this);
</script>
</body>
</html>    
